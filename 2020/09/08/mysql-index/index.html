<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>&#39;MySql 高级 &#39; | Kuro&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
    <meta name="keywords" content="Kuro,Kuro's Blog" />
  
  
    <meta name="baidu_site_verification" content="code-JRipY21QjX" />
  


  <meta name="description" content="MySql 高级Show profile1234567891011121314151617181920212223242526272829303132333435363738394041424344454647mysql&gt; set profiling&#x3D;1;Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; select">
<meta property="og:type" content="article">
<meta property="og:title" content="&#39;MySql 高级 &#39;">
<meta property="og:url" content="https://midkuro.gitee.io/2020/09/08/mysql-index/index.html">
<meta property="og:site_name" content="Kuro&#39;s Blog">
<meta property="og:description" content="MySql 高级Show profile1234567891011121314151617181920212223242526272829303132333435363738394041424344454647mysql&gt; set profiling&#x3D;1;Query OK, 0 rows affected, 1 warning (0.00 sec)mysql&gt; select">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-optimize/optimize-01.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-optimize/optimize-01.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-01.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-02.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-03.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-04.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-05.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-06.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-07.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-08.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-09.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-10.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-11.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-12.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-13.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-14.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-15.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-16.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-17.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-18.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-19.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-20.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-21.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-22.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-23.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-24.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-25.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-26.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-27.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-28.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-29.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-30.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-31.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-32.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-33.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-34.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-35.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-36.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-37.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-38.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-39.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-40.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-41.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-42.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-43.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-44.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-45.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-46.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-47.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-48.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-49.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-50.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-51.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-52.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-53.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-54.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-55.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-56.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-57.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-58.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-59.png">
<meta property="og:image" content="https://midkuro.gitee.io/images/mysql-index/index-60.png">
<meta property="article:published_time" content="2020-09-08T15:00:00.000Z">
<meta property="article:modified_time" content="2020-11-23T00:50:39.566Z">
<meta property="article:author" content="Kuro">
<meta property="article:tag" content="MYSQL">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://midkuro.gitee.io/images/mysql-optimize/optimize-01.png">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  
<link rel="stylesheet" href="/css/style.css">

  
<script src="/js/pace.min.js"></script>

  

  
  


  
  <!-- <meta name="baidu-site-verification" content="code-JRipY21QjX" /> -->
  
<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <div id="container">
      <header id="header">
    <div id="banner"></div>
    <div id="header-outer">
        <div id="header-menu" class="header-menu-pos animated">
            <div class="header-menu-container">
                <a href="/" class="left">
                    <span class="site-title">Kuro&#39;s Blog</span>
                </a>
                <nav id="header-menu-nav" class="right">
                    
                    <a  href="/">
                        <i class="fa fa-home"></i>
                        <span>Home</span>
                    </a>
                    
                    <a  href="/archives">
                        <i class="fa fa-archive"></i>
                        <span>Archives</span>
                    </a>
                    
                    <a  href="/about">
                        <i class="fa fa-user"></i>
                        <span>About</span>
                    </a>
                    
                </nav>
                <a class="mobile-header-menu-button">
                    <i class="fa fa-bars"></i>
                </a>
            </div>
        </div>
        <div id="header-row">
            <div id="logo">
                <a href="/">
                    <img src="/images/logo.png" alt="logo">
                </a>
            </div>
            <div class="header-info">
                <div id="header-title">
                    
                    <h2>
                        Kuro&#39;s Blog
                    </h2>
                    
                </div>
                <div id="header-description">
                    
                    <h3>
                        坚持 是一种品格
                    </h3>
                    
                </div>
            </div>
            <nav class="header-nav">
                <div class="social">
                    
                        <a title="Kuro"  href="//midkuro.gitee.io">
                            <i class="fa fa-home fa-2x"></i></a>
                    
                        <a title="Github" target="_blank" href="//github.com/midKuro/midkuro.github.io">
                            <i class="fa fa-github fa-2x"></i></a>
                    
                </div>
            </nav>
        </div>
    </div>
</header>
      <div class="outer">
        <section id="main" class="body-wrap"><article id="post-mysql-index" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="post-title" itemprop="name">
      &#39;MySql 高级 &#39;
    </h1>
    <div class="post-title-bar">
      <ul>
          
              <li>
                  <i class="fa fa-book"></i>
                  
                      <a href="/categories/MYSQL/">MYSQL</a>
                  
              </li>
          
        <li>
          <i class="fa fa-calendar"></i>  2020-09-08
        </li>
        <li>
          <i class="fa fa-eye"></i>
          <span id="busuanzi_value_page_pv"></span>
        </li>
      </ul>
    </div>
  

          
      </header>
    
    <div class="article-entry post-content" itemprop="articleBody">
      
            
            <h1 id="MySql-高级"><a href="#MySql-高级" class="headerlink" title="MySql 高级"></a>MySql 高级</h1><h2 id="Show-profile"><a href="#Show-profile" class="headerlink" title="Show profile"></a>Show profile</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; set profiling&#x3D;1;</span><br><span class="line">Query OK, 0 rows affected, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from um_user;</span><br><span class="line">+----------+----------+--------------+</span><br><span class="line">| username | password | userInfo     |</span><br><span class="line">+----------+----------+--------------+</span><br><span class="line">| admin    | admin    | aasa         |</span><br><span class="line">| test     | test     | aaaaaaaaaaaa |</span><br><span class="line">| guest    | guest    | ddddd        |</span><br><span class="line">+----------+----------+--------------+</span><br><span class="line">3 rows in set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; select * from emp;</span><br><span class="line">Empty set (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show profiles;</span><br><span class="line">+----------+------------+-----------------------+</span><br><span class="line">| Query_ID | Duration   | Query                 |</span><br><span class="line">+----------+------------+-----------------------+</span><br><span class="line">|        1 | 0.00028200 | set profiling&#x3D;1       |</span><br><span class="line">|        2 | 0.00087525 | select * from um_user |</span><br><span class="line">|        3 | 0.00037500 | select * from emp     |</span><br><span class="line">+----------+------------+-----------------------+</span><br><span class="line">3 rows in set, 1 warning (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; show profile for query 2;</span><br><span class="line">+----------------------+----------+</span><br><span class="line">| Status               | Duration |</span><br><span class="line">+----------------------+----------+</span><br><span class="line">| starting             | 0.000185 |</span><br><span class="line">| checking permissions | 0.000015 |</span><br><span class="line">| Opening tables       | 0.000025 |</span><br><span class="line">| init                 | 0.000106 |</span><br><span class="line">| System lock          | 0.000016 |</span><br><span class="line">| optimizing           | 0.000007 |</span><br><span class="line">| statistics           | 0.000018 |</span><br><span class="line">| preparing            | 0.000017 |</span><br><span class="line">| executing            | 0.000007 |</span><br><span class="line">| Sending data         | 0.000365 |</span><br><span class="line">| end                  | 0.000016 |</span><br><span class="line">| query end            | 0.000014 |</span><br><span class="line">| closing tables       | 0.000012 |</span><br><span class="line">| freeing items        | 0.000054 |</span><br><span class="line">| cleaning up          | 0.000021 |</span><br><span class="line">+----------------------+----------+</span><br><span class="line">15 rows in set, 1 warning (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><img src="/images/mysql-optimize/optimize-01.png" alt="mysql"></p>
<h2 id="show-processlist"><a href="#show-processlist" class="headerlink" title="show processlist"></a>show processlist</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; show processlist;</span><br><span class="line">+----+------+---------------------+------+---------+------+----------+------------------+</span><br><span class="line">| Id | User | Host                | db   | Command | Time | State    | Info             |</span><br><span class="line">+----+------+---------------------+------+---------+------+----------+------------------+</span><br><span class="line">|  3 | root | localhost           | kuro | Query   |    0 | starting | show processlist |</span><br><span class="line">|  4 | root | 192.168.163.1:10542 | NULL | Sleep   | 2430 |          | NULL             |</span><br><span class="line">|  5 | root | 192.168.163.1:10543 | kuro | Sleep   | 2420 |          | NULL             |</span><br><span class="line">|  6 | root | 192.168.163.1:10548 | kuro | Sleep   | 2425 |          | NULL             |</span><br><span class="line">|  7 | root | 192.168.163.1:10549 | kuro | Sleep   | 2420 |          | NULL             |</span><br><span class="line">+----+------+---------------------+------+---------+------+----------+------------------+</span><br><span class="line">5 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<p><img src="/images/mysql-optimize/optimize-01.png" alt="mysql"></p>
<h2 id="performance-schema"><a href="#performance-schema" class="headerlink" title="performance schema"></a>performance schema</h2><blockquote>
<p><a href="/2020/09/08/mysql-performanceSchema/">详细文档</a></p>
</blockquote>
<h2 id="逻辑架构"><a href="#逻辑架构" class="headerlink" title="逻辑架构"></a>逻辑架构</h2><p>和其他数据库相比，Mysql有点与众不同，他的架构在多种不同场景中应用并发挥良好作用。主要体现在存储引擎的架构上。<strong>插入式的存储引擎架构将查询处理和其他的系统任务以及数据的存储提取相分离。</strong>这种架构可以根据业务的需求和实际需要选择合适的存储引擎。</p>
<p><img src="/images/mysql-index/index-01.png" alt="mysql-01"></p>
<p><strong>连接层</strong></p>
<p>最上层是一些客户端和连接服务，包含本地sock通信和大多数基于客户端/服务端工具实现的类似于tcp/ip的通信。主要完成一些类似于连接处理、授权认证、及相关的安全方案。在该层上引入了线程池的概念，为通过认证安全接入的客户端提供线程。同样在该层上可以实现基于SSL的安全链接。服务器也会为安全接入的每个客户端验证它所具有的操作权限。</p>
<p><strong>服务层</strong></p>
<p>第二层架构主要完成大多少的核心服务功能，如SQL接口，并完成缓存的查询，SQL的分析和优化及部分内置函数的执行，所有跨存储引擎的功能也在这一层实现，如过程、函数等。在该层，服务器会解析查询并创建相应的内部解析树，并对其完成相应的优化，如确定查询表的顺序、是否利用索引等，最后生成相应的执行操作。</p>
<p>如果是select语句，服务器还会查询内部的缓存。这样在解决大量读操作的环境中能够很好的提升系统的性能。</p>
<p><strong>引擎层</strong></p>
<p>存储引擎层，存储引擎真正的负责了MySQL中数据的存储和提取，服务器通过API与存储引擎进行通信，不同的存储引擎具有的功能不通，这样我们可以根据自己的实际需要进行选取。</p>
<p><strong>存储层</strong></p>
<p>数据存储层，主要是将数据存储在运行于裸设备的文件系统之上，并完成与存储引擎的交互。</p>
<hr>
<p>首先，我们对该图中的各个模块做一简单介绍：<br><strong>1、Connectors</strong><br>　　指的是不同语言中与SQL的交互。<br>　　<br><strong>2、Connection Pool</strong><br>　　管理缓冲用户连接，线程处理等需要缓存的需求。负责监听对 MySQL Server 的各种请求，接收连接请求，转发所有连接请求到线程管理模块。每一个连接上 MySQL Server 的客户端请求都会被分配（或创建）一个连接线程为其单独服务。而连接线程的主要工作就是负责 MySQL Server 与客户端的通信，接受客户端的命令请求，传递 Server 端的结果信息等。线程管理模块则负责管理维护这些连接线程。包括线程的创建，线程的 cache 等。</p>
<p><strong>３、 Management Serveices &amp; Utilities</strong><br>　　系统管理和控制工具。</p>
<p><strong>4、 SQL Interface</strong><br>　　接受用户的SQL命令，并且返回用户需要查询的结果。<br>　　<br><strong>5、 Parser</strong><br>　　SQL命令传递到解析器的时候会被解析器验证和解析。解析器是由Lex和YACC实现的，是一个很长的脚本。在 MySQL中我们习惯将所有 Client 端发送给 Server 端的命令都称为 query ，在 MySQL Server 里面，连接线程接收到客户端的一个 Query 后，会直接将该 query 传递给专门负责将各种 Query 进行分类然后转发给各个对应的处理模块。<br><strong>主要功能</strong>：<br>　　a 、 将SQL语句进行语义和语法的分析，分解成数据结构，然后按照不同的操作类型进行分类，然后做出针对性的转发到后续步骤，以后SQL语句的传递和处理就是基于这个结构的；<br>　　b、 如果在分解构成中遇到错误，那么就说明这个sql语句是不合理的。</p>
<p><strong>6、 Optimizer</strong><br>　　查询优化器：SQL语句在查询之前会使用查询优化器对查询进行优化。就是优化客户端请求query，根据客户端请求的 query 语句，和数据库中的一些统计信息，在一系列算法的基础上进行分析，得出一个最优的策略，告诉后面的程序如何取得这个 query 语句的结果。<br>　　使用的是“选取-投影-联接”策略进行查询：<br>用一个例子就可以理解： select uid,name from user where gender = 1;<br>这个select 查询先根据where 语句进行选取，而不是先将表全部查询出来以后再进行gender过滤；然后根据uid和name进行属性投影，而不是将属性全部取出以后再进行过滤。最后将这两个查询条件联接起来生成最终查询结果。</p>
<p><strong>7 、Cache和Buffer</strong><br>　　查询缓存：主要功能是将客户端提交 给MySQL 的 Select 类 query 请求的返回结果集 cache 到内存中，与该 query 的一个 hash 值 做一个对应。该 query 所取数据的基表发生任何数据的变化之后， MySQL 会自动使该 query 的Cache 失效。在读写比例非常高的应用系统中， Query Cache 对性能的提高是非常显著的。当然它对内存的消耗也是非常大的。<br>　　如果查询缓存有命中的查询结果，查询语句就可以直接去查询缓存中取数据。这个缓存机制是由一系列小缓存组成的。比如表缓存，记录缓存，key缓存，权限缓存等。</p>
<p><strong>8 、存储引擎接口</strong><br>　　MySQL区别于其他数据库的最重要的特点就是其插件式的表存储引擎。MySQL插件式的存储引擎架构提供了一系列标准的管理和服务支持，这些标准与存储引擎本身无关，可能是每个数据库系统本身都必需的，如SQL分析器和优化器等，而存储引擎是底层物理结构的实现，每个存储引擎开发者都可以按照自己的意愿来进行开发。<br><strong>注意：存储引擎是基于表的，而不是数据库。</strong></p>
<hr>
<h3 id="查看命令"><a href="#查看命令" class="headerlink" title="查看命令"></a>查看命令</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#查看mysql提供什么存储引擎</span><br><span class="line">show engines;</span><br><span class="line">#查看当前默认的存储引擎</span><br><span class="line">show variables like &#39;%storage_engine%&#39;;</span><br></pre></td></tr></table></figure>

<p><strong>MyISAM和InnoDB对比</strong></p>
<p><img src="/images/mysql-index/index-02.png" alt="mysql-02"></p>
<h2 id="索引优化分析"><a href="#索引优化分析" class="headerlink" title="索引优化分析"></a>索引优化分析</h2><h3 id="SQL执行顺序"><a href="#SQL执行顺序" class="headerlink" title="SQL执行顺序"></a>SQL执行顺序</h3><blockquote>
<p>手写顺序：</p>
</blockquote>
<p><img src="/images/mysql-index/index-03.png" alt="mysql-03"></p>
<blockquote>
<p>机器顺序：</p>
</blockquote>
<p><img src="/images/mysql-index/index-04.png" alt="mysql-04"></p>
<h3 id="Join查询"><a href="#Join查询" class="headerlink" title="Join查询"></a>Join查询</h3><p><img src="/images/mysql-index/index-05.png" alt="mysql-05"></p>
<h3 id="索引简介"><a href="#索引简介" class="headerlink" title="索引简介"></a>索引简介</h3><p>MySQL官方对索引的定义为：索引(Index)是帮助MySQL高校获取数据的数据结构。</p>
<p>可以得到索引的本质：<strong>索引是数据结构</strong>。索引的目的在提高查询效率，可以类比字典。<strong>可以简单理解为”排好序的快速查找数据结构”。</strong></p>
<p><img src="/images/mysql-index/index-06.png" alt="mysql-06"></p>
<p>数据本身之外,数据库还维护着一个满足特定查找算法的数据结构，这些数据结构以某种方式指向数据，这样就可以在这些数据结构的基础上实现高级查找算法,这种数据结构就是索引。</p>
<p>一般来说索引本身也很大，不可能全部存储在内存中，因此索引往往以文件形式存储在硬盘上。</p>
<p>我们平时所说的索引，如果没有特别指明，都是指B树(多路搜索树，并不一定是二叉树)结构组织的索引。其中聚集索引，次要索引，覆盖索引，复合索引，前缀索引，唯一索引默认都是使用B+树索引，统称索引。当然,除了B+树这种类型的索引之外，还有哈希索引(hash index)等。</p>
<blockquote>
<p>优势：</p>
<p>1.类似大学图书馆建书目索引，提高数据检索效率，降低数据库的IO成本</p>
<p>2.通过索引列对数据进行排序，降低数据排序成本，降低了CPU的消耗</p>
</blockquote>
<blockquote>
<p>劣势：</p>
<p>1.实际上索引也是一张表，该表保存了主键和索引字段，并指向实体表的记录,所以索引列也是要占用空间的</p>
<p>2.虽然索引大大提高了查询速度，同时却会降低更新表的速度,如果对表INSERT,UPDATE和DELETE。因为更新表时，MySQL不仅要不存数据，还要保存一下索引文件每次更新添加了索引列的字段，都会调整因为更新所带来的键值变化后的索引信息。</p>
<p>3.索引只是提高效率的一个因素，如果你的MySQL有大数据量的表，就需要花时间研究建立优秀的索引，或优化查询语句。</p>
</blockquote>
<h3 id="索引分类"><a href="#索引分类" class="headerlink" title="索引分类"></a>索引分类</h3><p><strong>单值索引</strong>：即一个索引只包含单个列，一个表可以有多个单列索引</p>
<p><strong>唯一索引</strong>：索引列的值必须唯一，但允许有空值</p>
<p><strong>复合索引</strong>：即一个索引包含多个列</p>
<p><a href="/2020/09/08/mysql-technology/">创建索引的基本语法</a></p>
<h3 id="索引结构"><a href="#索引结构" class="headerlink" title="索引结构"></a>索引结构</h3><h4 id="BTree索引"><a href="#BTree索引" class="headerlink" title="BTree索引"></a>BTree索引</h4><p><img src="/images/mysql-index/index-07.png" alt="mysql-07"></p>
<blockquote>
<p>初始化介绍：</p>
<p>浅蓝色的块我们称之为一个磁盘块，可以看到每个磁盘块包含几个数据项（深蓝色所示）和指针（黄色所示），如磁盘块1包含数据项17和35，包含指针P1、P2、P3，P1表示小于17的磁盘块，P2表示在17和35之间的磁盘块，P3表示大于35的磁盘块。</p>
<p><strong>真实的数据存在于叶子节点</strong>即3、5、9、10、13、15、28、29、36、60、75、79、90、99。非叶子节点不存储真实的数据，只存储指引搜索方向的数据项，<strong>如17、35并不真实存在于数据表中</strong>。</p>
</blockquote>
<blockquote>
<p>查找过程：</p>
<p>如果要查找数据项29，那么首先会把磁盘块1由磁盘加载到内存，此时发生一次IO，在内存中用二分查找确定29在17和35之间，锁定磁盘块1的P2指针，内存时间因为非常短（相比磁盘的IO）可以忽略不计，通过磁盘块1的P2指针的磁盘地址把磁盘块3由磁盘加载到内存，发生第二次IO，29在26和30之间，锁定磁盘块3的P2指针，通过指针加载磁盘块8到内存，发生第三次IO，同时内存中做二分查找找到29，结束查询，总计三次IO。</p>
<p>真实的情况是，<strong>3层的b+树可以表示上百万的数据，如果上百万的数据查找只需要三次IO，性能提高将是巨大的</strong>，如果没有索引，每个数据项都要发生一次IO，那么总共需要百万次的IO，显然成本非常非常高。</p>
</blockquote>
<p>Btree索引(或Balanced Tree)，是一种很普遍的数据库索引结构，oracle默认的索引类型（本文也主要依据oracle来讲）。其特点是定位高效、利用率高、自我平衡，特别适用于高基数字段，定位单条或小范围数据非常高效。理论上，使用Btree在亿条数据与100条数据中定位记录的花销相同。</p>
<p>mysql支持其他索引结构，如<code>Hash</code>索引、<code>full-text</code>全文索引，<code>R-Tree</code>索引。</p>
<blockquote>
<p>哪些情况需要创建索引？</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1.主键自动建立唯一索引</span><br><span class="line"></span><br><span class="line">2.频繁作为查询的条件的字段应该创建索引</span><br><span class="line"></span><br><span class="line">3.查询中与其他表关联的字段，外键关系建立索引</span><br><span class="line"></span><br><span class="line">4.频繁更新的字段不适合创建索引，因为每次更新不单单是更新了记录还会更新索引，加重IO负担</span><br><span class="line"></span><br><span class="line">5.Where条件里用不到的字段不创建索引</span><br><span class="line"></span><br><span class="line">6.单间&#x2F;组合索引的选择问题，who？（在高并发下倾向创建组合索引）</span><br><span class="line"></span><br><span class="line">7.查询中排序的字段，排序字段若通过索引去访问将大大提高排序的速度</span><br><span class="line"></span><br><span class="line">8.查询中统计或者分组字段</span><br></pre></td></tr></table></figure>

<blockquote>
<p>哪些情况不需要创建索引？</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.表记录太少</span><br><span class="line"></span><br><span class="line">2.经常增删改的表</span><br><span class="line"></span><br><span class="line">3.数据重复且分布平均的表字段，因此应该只为经常查询和经常排序的数据列建立索引。</span><br><span class="line">注意，如果某个数据列包含许多重复的内容，为它建立索引就没有太大的实际效果。如性别：男&#x2F;女</span><br></pre></td></tr></table></figure>

<h3 id="性能分析"><a href="#性能分析" class="headerlink" title="性能分析"></a>性能分析</h3><h4 id="MySQL-Query-Optimizer"><a href="#MySQL-Query-Optimizer" class="headerlink" title="MySQL Query Optimizer"></a>MySQL Query Optimizer</h4><p>mysql中有专门负责优化 select 语句的优化器模块，主要功能：通过计算分析系统中收集到的统计信息，为窗户端请求的query提供它认为最优的执行计划（不一定是DBA认为最优的，这部分最耗费时间）。</p>
<p>当客户端向mysql发送一条query，命令解析器模块完成请求分类，区别出是select并转发给 mysql query optimizer时，mysql query optimizer首先会对整条query进行优化，处理掉一些常量表达式的预算，直接换算成常量值。并对query中的查询条件进行简化和调整，如去掉一些无用或显而易见的条件、结构调整等。</p>
<p>然后分析query中的hint信息（如果有），看显示hint信息是否可以完全确定该query的执行计划。如果没有hint或hint信息还不足以完全确定执行计划，则会读取所涉及对象的统计信息，根据query进行写相应的计算分析，然后再得出最后的执行计划。</p>
<h4 id="常见瓶颈"><a href="#常见瓶颈" class="headerlink" title="常见瓶颈"></a>常见瓶颈</h4><ol>
<li>CPU : CPU在饱和的时候一般发生在数据装入内存或从磁盘上读取数据的时候</li>
<li>IO : 磁盘I/O瓶颈发生在装入数据远大于内存容量的时候</li>
<li>服务器硬件的性能瓶颈 : top,free,iostat和vmstat来查看系统的性能状态</li>
</ol>
<h4 id="Explain"><a href="#Explain" class="headerlink" title="Explain"></a>Explain</h4><blockquote>
<p>使用EXPLAIN关键字可以模拟优化器执行SQL语句，从而知道MySQL是如何处理你的SQL语句的。分析你的查询语句或是结构的性能瓶颈。</p>
</blockquote>
<p>它能够看到表的读取顺序、数据读取操作的操作类型、哪些索引可以使用、哪些索引被实际使用、表之间的引用、每张表有多少行被优化器查询。</p>
<h5 id="id"><a href="#id" class="headerlink" title="id"></a>id</h5><p>select查询的序列号，包含一组数字，表示查询中执行select子句或操作表的顺序</p>
<p>三种情况：</p>
<blockquote>
<p>第一种：id相同，执行顺序由上至下</p>
</blockquote>
<p><img src="/images/mysql-index/index-08.png" alt="mysql-08"></p>
<blockquote>
<p>第二种：id不同，如果是子查询，id的序号会递增，id值越大优先级越高，越先被执行</p>
</blockquote>
<p><img src="/images/mysql-index/index-09.png" alt="mysql-09"></p>
<blockquote>
<p>第三种：id相同不同，同时存在</p>
</blockquote>
<p><img src="/images/mysql-index/index-10.png" alt="mysql-10"></p>
<h5 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h5><p>查询的类型，主要用于区别，普通查询、联合查询、子查询等的复杂查询</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">1.SIMPLE		: 简单的select查询，查询中不包含子查询或者UNION</span><br><span class="line">2.PRIMARY		: 查询中若包含任何复杂的子部分，最外层查询则被标记为PRIMARY</span><br><span class="line">3.SUBQUERY		: 在SELECT或者WHERE列表中包含了子查询</span><br><span class="line">4.DERIVED		: 在FROM列表中包含的子查询被标记为DERIVED（衍生） </span><br><span class="line">          MySQL会递归执行这些子查询，把结果放在临时表里。</span><br><span class="line">5.UNION			: 若第二个SELECT出现在UNION之后，则被标记为UNION;</span><br><span class="line">          若UNION包含在FROM子句的子查询中，外层SELECT将被标记为：DERIVED</span><br><span class="line">6.UNION RESULT	: 从UNION表获取结果的SELECT</span><br></pre></td></tr></table></figure>

<h5 id="table"><a href="#table" class="headerlink" title="table"></a>table</h5><p>显示这一行的数据是关于哪张表的</p>
<h5 id="type"><a href="#type" class="headerlink" title="type"></a>type</h5><p>显示查询使用了何种类型，<strong>从最好到最差依次</strong>是：<code>system&gt;const&gt;eq_ref&gt;ref&gt;range&gt;index&gt;ALL</code></p>
<blockquote>
<p>system：表只有一行记录（等于系统表），这是const类型的特例，平时不会出现，这个也可以忽略不计</p>
</blockquote>
<blockquote>
<p>const：表示通过索引一次就找到了，const用于比较primary key或者unique索引。因为只匹配一行数据，所以很快。如将主键至于where列表中，MySQL就能将该查询转换为一个常量</p>
</blockquote>
<p><img src="/images/mysql-index/index-11.png" alt="mysql-11"></p>
<blockquote>
<p>eq_ref：唯一性索引，对于每个索引键，表中只有一条记录与之匹配，常见于主键或唯一索引扫描</p>
</blockquote>
<p><img src="/images/mysql-index/index-12.png" alt="mysql-12"></p>
<blockquote>
<p>ref：非唯一索引扫描，返回匹配某个单独值的所有行。本质上也是一种索引访问，它返回所有匹配某个单独值的行，然而，它可能会找到多个符合条件的行，所以他应该属于查找和扫描的混合体</p>
</blockquote>
<p><img src="/images/mysql-index/index-13.png" alt="mysql-13"></p>
<blockquote>
<p>range：</p>
<p>只检索给定范围的行，使用一个索引来选择行。key列显示使用了哪个索引</p>
<p>一般就是在你的where语句中出现了between、&lt;、&gt;、in等的查询</p>
<p>这种范围扫描索引扫描比全表扫描要好，因为他只需要开始索引的某一点，而结束语另一点，不用扫描全部索引</p>
</blockquote>
<p><img src="/images/mysql-index/index-14.png" alt="mysql-14"></p>
<blockquote>
<p>index：</p>
<p>Full Index Scan,index与ALL区别为index类型只遍历索引树。这通常比ALL快，因为索引文件通常比数据文件小。<br>（<strong>也就是说虽然all和index都是读全表</strong>，但index是从索引中读取的，而all是从硬盘中读的）</p>
</blockquote>
<p><img src="/images/mysql-index/index-15.png" alt="mysql-15"></p>
<blockquote>
<p>all：FullTable Scan,将遍历全表以找到匹配的行</p>
</blockquote>
<p><img src="/images/mysql-index/index-16.png" alt="mysql-16"></p>
<p><strong>一般来说，得保证查询只是达到range级别，最好达到ref</strong></p>
<h5 id="possible-keys"><a href="#possible-keys" class="headerlink" title="possible_keys"></a>possible_keys</h5><p>显示可能应用在这张表中的索引,一个或多个。查询涉及的字段上若存在索引，则该索引将被列出，<strong>但不一定被查询实际使用</strong>。</p>
<h5 id="key"><a href="#key" class="headerlink" title="key"></a>key</h5><p>实际使用的索引。如果为null则没有使用索引，<strong>查询中若使用了覆盖索引，则索引和查询的select字段重叠</strong>。</p>
<h5 id="key-len"><a href="#key-len" class="headerlink" title="key_len"></a>key_len</h5><p>表示索引中使用的字节数，可通过该列计算查询中使用的索引的长度。在不损失精确性的情况下，长度越短越好。</p>
<p>key_len显示的值为索引最大可能长度，<strong>并非实际使用长度</strong>，即key_len是根据表定义计算而得，不是通过表内检索出的。</p>
<p><img src="/images/mysql-index/index-17.png" alt="mysql-17"></p>
<h5 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h5><p>显示索引那一列被使用了，如果可能的话，是一个常数。那些列或常量被用于查找索引列上的值</p>
<p><img src="/images/mysql-index/index-18.png" alt="mysql-18"></p>
<h5 id="rows"><a href="#rows" class="headerlink" title="rows"></a>rows</h5><p>根据表统计信息及索引选用情况，大致估算出找到所需的记录所需要读取的行数</p>
<p><img src="/images/mysql-index/index-19.png" alt="mysql-19"></p>
<h5 id="Extra"><a href="#Extra" class="headerlink" title="Extra"></a>Extra</h5><p>包含不适合在其他列中显示但十分重要的额外信息</p>
<blockquote>
<p>Using filesort：</p>
<p>说明mysql会对数据使用一个外部的索引排序，而不是按照表内的索引顺序进行读取。<br>MySQL中无法利用索引完成排序操作成为“文件排序”</p>
</blockquote>
<p><img src="/images/mysql-index/index-20.png" alt="mysql-20"></p>
<blockquote>
<p>Using temporary：</p>
<p>使用了临时表保存中间结果，MySQL在对查询结果排序时使用临时表。常见于排序order by 和分组查询 group by</p>
</blockquote>
<p><img src="/images/mysql-index/index-21.png" alt="mysql-21"></p>
<blockquote>
<p>Using Index：</p>
<p>表示相应的select操作中使用了覆盖索引（Coveing Index）,避免访问了表的数据行，效率不错！<br>如果同时出现using where，表明索引被用来执行索引键值的查找；<br>如果没有同时出现using where，表面索引用来读取数据而非执行查找动作。</p>
</blockquote>
<p><img src="/images/mysql-index/index-22.png" alt="mysql-22"></p>
<p><img src="/images/mysql-index/index-23.png" alt="mysql-23"></p>
<blockquote>
<p>impossible where：</p>
<p>where子句的值总是false，不能用来获取任何元组</p>
</blockquote>
<p><img src="/images/mysql-index/index-24.png" alt="mysql-24"></p>
<blockquote>
<p>Using where：表示使用了 where 过滤</p>
</blockquote>
<blockquote>
<p>using join buffer：使用了连接缓存</p>
<p>distinct：优化distinct，在找到第一匹配的元组后即停止找同样值的工作</p>
<p>select tables optimized away：</p>
<p>在没有GROUPBY子句的情况下，基于索引优化MIN/MAX操作或者<br>对于MyISAM存储引擎优化COUNT(*)操作，不必等到执行阶段再进行计算，<br>查询执行计划生成的阶段即完成优化。</p>
</blockquote>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><p><img src="/images/mysql-index/index-25.png" alt="mysql-25"></p>
<p><img src="/images/mysql-index/index-26.png" alt="mysql-26"></p>
<h4 id="索引优化"><a href="#索引优化" class="headerlink" title="索引优化"></a>索引优化</h4><blockquote>
<p>1.最佳全值匹配</p>
</blockquote>
<p><img src="/images/mysql-index/index-27.png" alt="mysql-27"></p>
<blockquote>
<p>2.最佳左前缀法则</p>
<p>如果索引了多例，要遵守最左前缀法则。指的是查询从索引的最左前列开始并且<strong>不跳过索引中的列</strong>。</p>
</blockquote>
<p><img src="/images/mysql-index/index-28.png" alt="mysql-28"></p>
<blockquote>
<p>3.不在索引列上做任何操作（计算、函数、（自动or手动）类型转换），会导致索引失效而转向全表扫描</p>
</blockquote>
<p><img src="/images/mysql-index/index-29.png" alt="mysql-29"></p>
<blockquote>
<p>4.存储引擎不能使用索引中范围条件右边的列</p>
</blockquote>
<p><img src="/images/mysql-index/index-30.png" alt="mysql-30"></p>
<blockquote>
<p>5.尽量使用覆盖索引（只访问索引的查询（索引列和查询列一致）），减少select*</p>
</blockquote>
<p><img src="/images/mysql-index/index-31.png" alt="mysql-31"></p>
<p><img src="/images/mysql-index/index-32.png" alt="mysql-32"></p>
<blockquote>
<p>6.mysql在使用不等于（！=或者&lt;&gt;）的时候无法使用索引会导致全表扫描</p>
</blockquote>
<p><img src="/images/mysql-index/index-33.png" alt="mysql-33"></p>
<blockquote>
<p>7.is null,is not null 也无法使用索引</p>
</blockquote>
<p><img src="/images/mysql-index/index-34.png" alt="mysql-34"></p>
<blockquote>
<p>8.like以通配符开头（’$abc…’）mysql索引失效会变成全表扫描操作</p>
</blockquote>
<p><img src="/images/mysql-index/index-35.png" alt="mysql-35"></p>
<blockquote>
<p>问题：解决like’%字符串%’索引不被使用的方法？？</p>
<p>1、可以使用主键索引<br>2、使用覆盖索引，查询字段必须是建立覆盖索引字段<br>3、当覆盖索引指向的字段是varchar(380)及380以上的字段时，覆盖索引会失效！</p>
</blockquote>
<blockquote>
<p>9.字符串不加单引号索引失效</p>
</blockquote>
<p><img src="/images/mysql-index/index-36.png" alt="mysql-36"></p>
<blockquote>
<p>10.少用or,用它连接时会索引失效</p>
</blockquote>
<p><img src="/images/mysql-index/index-37.png" alt="mysql-37"></p>
<p><strong>小总结</strong></p>
<p><img src="/images/mysql-index/index-38.png" alt="mysql-38"></p>
<p><code>like KK%</code>相当于=常量     <code>%KK</code>和<code>%KK%</code> 相当于范围</p>
<blockquote>
<p>一般性建议：</p>
<p>对于单键索引，尽量选择针对当前query过滤性更好的索引</p>
<p>在选择组合索引的时候，当前Query中过滤性最好的字段在索引字段顺序中，位置越靠前越好</p>
<p>在选择组合索引的时候，尽量选择可以能包含当前query中的where子句中更多字段的索引</p>
<p>尽可能通过分析统计信息和调整query的写法来达到选择合适索引的目的</p>
</blockquote>
<h2 id="查询截取分析"><a href="#查询截取分析" class="headerlink" title="查询截取分析"></a>查询截取分析</h2><h3 id="查询优化"><a href="#查询优化" class="headerlink" title="查询优化"></a>查询优化</h3><p>永远小表驱动大表，类似嵌套循环<code>Nested Loop</code></p>
<p><img src="/images/mysql-index/index-39.png" alt="mysql-39"></p>
<p><img src="/images/mysql-index/index-40.png" alt="mysql-40"></p>
<p><img src="/images/mysql-index/index-41.png" alt="mysql-41"></p>
<blockquote>
<p>相关：</p>
<p>尽可能减少Join语句中的NestedLoop的循环总次数：“<strong>永远用小结果集驱动大的结果集</strong>”</p>
<p>优先优化NestedLoop的内层循环：</p>
<p><strong>保证Join语句中被驱动表上Join条件字段已经被索引</strong></p>
<p>当无法保证被驱动表的Join条件字段被索引且内存资源充足的前提下，不要太吝啬<code>JoinBuffer</code>的设置；</p>
</blockquote>
<h4 id="Order-by优化"><a href="#Order-by优化" class="headerlink" title="Order by优化"></a>Order by优化</h4><p>MySQL支持二种方式的排序，FileSort和Index,Index效率高。它指MySQL扫描索引本身完成排序。FileSort方式效率较低。</p>
<blockquote>
<p>ORDER BY子句，尽量使用Index方式排序，避免使用FileSort方式排序。</p>
</blockquote>
<p><img src="/images/mysql-index/index-42.png" alt="mysql-42"></p>
<p><img src="/images/mysql-index/index-43.png" alt="mysql-43"></p>
<blockquote>
<p>ORDER BY满足两情况，会使用Index方式排序：</p>
<p>ORDER BY语句使用索引最左前列</p>
<p>使用where子句与OrderBy子句条件列组合满足索引最左前列</p>
</blockquote>
<p>尽可能在索引列上完成排序操作，遵照索引建的最佳左前缀，如果不在索引列上，filesort有两种算法：mysql就要启动双路排序和单路排序。</p>
<blockquote>
<p>双路排序：</p>
<p>MySQL4.1之前是使用双路排序，字面意思是两次扫描磁盘，最终得到数据。</p>
<p>读取行指针和orderby列，对他们进行排序，然后扫描已经排序好的列表，按照列表中的值重新从列表中读取对应的数据传输。</p>
<p>从磁盘取排序字段，在buffer进行排序，再从磁盘取其他字段。</p>
</blockquote>
<p>取一批数据，要对磁盘进行两次扫描，众所周知，I\O是很耗时的，所以在mysql4.1之后，出现了第二张改进的算法，就是单路排序。</p>
<blockquote>
<p>单路排序：</p>
<p>从磁盘读取查询需要的所有列，按照orderby列在buffer对它们进行排序，然后扫描排序后的列表进行输出，它的效率更快一些，避免了第二次读取数据，并且把随机IO变成顺序IO，但是它会使用更多的空间，因为它把每一行都保存在内存中了。</p>
</blockquote>
<p>总体而言，单路排序好过双路排序，但是单路排序也有一定的问题：</p>
<p><img src="/images/mysql-index/index-44.png" alt="mysql-44"></p>
<p>可以通过增大sort_buffer_size参数的设置、增大max_length_for_sort_data参数的设置来进行优化。</p>
<p><img src="/images/mysql-index/index-45.png" alt="mysql-45"></p>
<p><strong>总结</strong></p>
<p><img src="/images/mysql-index/index-46.png" alt="mysql-46"></p>
<h4 id="Group-by优化"><a href="#Group-by优化" class="headerlink" title="Group by优化"></a>Group by优化</h4><p>1.group by 实质是先排序后进行分组，遵照索引建的最佳左前缀</p>
<p>2.当无法使用索引列，增大max_length_for_sort_data参数的设置+增大sort_buffer_size参数的设置</p>
<p>3.where高于having,能写在where限定的条件就不要去having限定了。</p>
<h2 id="主从复制"><a href="#主从复制" class="headerlink" title="主从复制"></a>主从复制</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p><img src="/images/mysql-index/index-47.png" alt="mysql-47"></p>
<p>每个slave只有一个master，每个slave只能有一个唯一的服务器ID，每个master可以有多个salve。</p>
<h2 id="锁机制"><a href="#锁机制" class="headerlink" title="锁机制"></a>锁机制</h2><h3 id="锁的分类"><a href="#锁的分类" class="headerlink" title="锁的分类"></a>锁的分类</h3><blockquote>
<p>从数据操作的类型分：</p>
<p>读锁（共享锁）：针对同一份数据，多个读操作可以同时进行而不会互相影响</p>
<p>写锁（排它锁）：当前写操作没有完成前，它会阻断其他写锁和读锁。</p>
</blockquote>
<blockquote>
<p>从对数据操作的颗粒度：</p>
<p>表锁</p>
<p>行锁</p>
</blockquote>
<h3 id="表锁（偏读）"><a href="#表锁（偏读）" class="headerlink" title="表锁（偏读）"></a>表锁（偏读）</h3><p>特点：偏向MyISAM存储引擎，开销小，加锁快，无死锁，锁定粒度大，发生锁冲突的概率最高，并发最低。</p>
<p><strong>加读锁</strong>：</p>
<p><img src="/images/mysql-index/index-48.png" alt="mysql-48"></p>
<p><img src="/images/mysql-index/index-49.png" alt="mysql-49"></p>
<p><strong>加写锁</strong>：</p>
<p><img src="/images/mysql-index/index-50.png" alt="mysql-50"></p>
<p><img src="/images/mysql-index/index-51.png" alt="mysql-51"></p>
<p><strong>结论</strong>：</p>
<p><strong>简而言之，就是读锁会阻塞写，但是不会阻塞读，而写锁则会把读和写都堵塞。</strong></p>
<p><img src="/images/mysql-index/index-52.png" alt="mysql-52"></p>
<p><strong>表锁分析</strong>：</p>
<p><img src="/images/mysql-index/index-53.png" alt="mysql-53"></p>
<p><img src="/images/mysql-index/index-54.png" alt="mysql-54"></p>
<p><strong>此外，Myisam的读写锁调度是写优先，这也是myisam不适合做写为主表的引擎。因为写锁后，其他线程不能做任何操作，大量更新回事查询很难得到锁，从而造成永远阻塞。</strong></p>
<h3 id="行锁（偏写）"><a href="#行锁（偏写）" class="headerlink" title="行锁（偏写）"></a>行锁（偏写）</h3><p>特点：偏向InnoDB存储引擎，开销大，加锁慢；会出现死锁；锁定粒度最小，发生锁冲突的概率最低，并发度也最高。<strong>InnoDB与MyISAM的最大不同有两点：一是支持事务（TRANSACTION）;二是采用了行级锁</strong>。</p>
<p><strong>行锁基本演示</strong>：</p>
<p><img src="/images/mysql-index/index-55.png" alt="mysql-55"></p>
<blockquote>
<p><strong>无索引行锁升级为表锁：varchar  不用 ‘ ‘  导致系统自动转换类型, 行锁变表锁</strong></p>
</blockquote>
<p><strong>间隙锁的危害</strong>：</p>
<p><img src="/images/mysql-index/index-56.png" alt="mysql-56"></p>
<p>间隙锁一个比较致命的弱点，就是当锁定一个范围键值之后，即使某些不存在的键值也会被无辜的锁定，而造成在锁定的时候无法插入锁定键值范围内的任何数据。在某些场景下这可能会对性能造成很大的危害。</p>
<blockquote>
<p>面试题：常考如何锁定一行</p>
</blockquote>
<p><img src="/images/mysql-index/index-57.png" alt="mysql-57"></p>
<p><strong>结论</strong>：</p>
<p><img src="/images/mysql-index/index-58.png" alt="mysql-58"></p>
<p><strong>行锁分析</strong>：</p>
<p><img src="/images/mysql-index/index-59.png" alt="mysql-59"></p>
<p><img src="/images/mysql-index/index-60.png" alt="mysql-60"></p>
<p><strong>优化建议</strong>：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.尽可能让所有数据检索都通过索引来完成，避免无索引行锁升级为表锁</span><br><span class="line">2.合理设计索引，尽量缩小锁的范围</span><br><span class="line">3.尽可能较少检索条件，避免间隙锁</span><br><span class="line">4.尽量控制事务大小，减少锁定资源量和时间长度</span><br><span class="line">5.尽可能低级别事务隔离</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://www.jianshu.com/p/4bcfffb27ed5" target="_blank" rel="noopener">bin_log、redo_log、undo_log</a></p>
</blockquote>

            <div class="post-copyright">
    <div class="content">
        <p>最后更新： 2020年11月23日 08:50</p>
        <p>原始链接： <a class="post-url" href="/2020/09/08/mysql-index/" title="&#39;MySql 高级 &#39;">https://midkuro.gitee.io/2020/09/08/mysql-index/</a></p>
        <footer>
            <a href="https://midkuro.gitee.io">
                <img src="/images/logo.png" alt="Kuro">
                Kuro
            </a>
        </footer>
    </div>
</div>

      
        
            
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;">赏</a>
</div>

<div id="reward" class="post-modal reward-lay">
    <a class="close" href="javascript:;" id="reward-close">×</a>
    <span class="reward-title">
        <i class="icon icon-quote-left"></i>
        请我吃糖~
        <i class="icon icon-quote-right"></i>
    </span>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/images/wechat_code.jpg" alt="打赏二维码">
        </div>
        <div class="reward-select">
            
            <label class="reward-select-item checked" data-id="wechat" data-wechat="/images/wechat_code.jpg">
                <img class="reward-select-item-wechat" src="/images/wechat.png" alt="微信">
            </label>
            
            
            <label class="reward-select-item" data-id="alipay" data-alipay="/images/alipay_code.jpg">
                <img class="reward-select-item-alipay" src="/images/alipay.png" alt="支付宝">
            </label>
            
        </div>
    </div>
</div>


        
    </div>
    <footer class="article-footer">
        
        
<div class="post-share">
    <a href="javascript:;" id="share-sub" class="post-share-fab">
        <i class="fa fa-share-alt"></i>
    </a>
    <div class="post-share-list" id="share-list">
        <ul class="share-icons">
          <li>
            <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://midkuro.gitee.io/2020/09/08/mysql-index/&title=《'MySql 高级 '》 — Kuro's Blog&pic=images/mysql.jpg" data-title="微博">
              <i class="fa fa-weibo"></i>
            </a>
          </li>
          <li>
            <a class="weixin share-sns" id="wxFab" href="javascript:;" data-title="微信">
              <i class="fa fa-weixin"></i>
            </a>
          </li>
          <li>
            <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://midkuro.gitee.io/2020/09/08/mysql-index/&title=《'MySql 高级 '》 — Kuro's Blog&source=坚持 是一种品格" data-title="QQ">
              <i class="fa fa-qq"></i>
            </a>
          </li>
          <li>
            <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://midkuro.gitee.io/2020/09/08/mysql-index/" data-title="Facebook">
              <i class="fa fa-facebook"></i>
            </a>
          </li>
          <li>
            <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《'MySql 高级 '》 — Kuro's Blog&url=https://midkuro.gitee.io/2020/09/08/mysql-index/&via=https://midkuro.gitee.io" data-title="Twitter">
              <i class="fa fa-twitter"></i>
            </a>
          </li>
          <li>
            <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://midkuro.gitee.io/2020/09/08/mysql-index/" data-title="Google+">
              <i class="fa fa-google-plus"></i>
            </a>
          </li>
        </ul>
     </div>
</div>
<div class="post-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;" id="wxShare-close">×</a>
    <p>扫一扫，分享到微信</p>
    <img src="//api.qrserver.com/v1/create-qr-code/?data=https://midkuro.gitee.io/2020/09/08/mysql-index/" alt="微信分享二维码">
</div>

<div class="mask"></div>

        
        <ul class="article-footer-menu">
            
            
  <li class="article-footer-tags">
    <i class="fa fa-tags"></i>
      
    <a href="/tags/MYSQL/" class="color1">MYSQL</a>
      
  </li>

        </ul>
        
    </footer>
  </div>
</article>


    <aside class="post-toc-pos post-toc-top" id="post-toc">
        <nav class="post-toc-wrap">
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#MySql-高级"><span class="post-toc-text">MySql 高级</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Show-profile"><span class="post-toc-text">Show profile</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#show-processlist"><span class="post-toc-text">show processlist</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#performance-schema"><span class="post-toc-text">performance schema</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#逻辑架构"><span class="post-toc-text">逻辑架构</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#查看命令"><span class="post-toc-text">查看命令</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#索引优化分析"><span class="post-toc-text">索引优化分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#SQL执行顺序"><span class="post-toc-text">SQL执行顺序</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#Join查询"><span class="post-toc-text">Join查询</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#索引简介"><span class="post-toc-text">索引简介</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#索引分类"><span class="post-toc-text">索引分类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#索引结构"><span class="post-toc-text">索引结构</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#BTree索引"><span class="post-toc-text">BTree索引</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#性能分析"><span class="post-toc-text">性能分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#MySQL-Query-Optimizer"><span class="post-toc-text">MySQL Query Optimizer</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#常见瓶颈"><span class="post-toc-text">常见瓶颈</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Explain"><span class="post-toc-text">Explain</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#id"><span class="post-toc-text">id</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#select-type"><span class="post-toc-text">select_type</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#table"><span class="post-toc-text">table</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#type"><span class="post-toc-text">type</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#possible-keys"><span class="post-toc-text">possible_keys</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#key"><span class="post-toc-text">key</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#key-len"><span class="post-toc-text">key_len</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#ref"><span class="post-toc-text">ref</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#rows"><span class="post-toc-text">rows</span></a></li><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Extra"><span class="post-toc-text">Extra</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#案例"><span class="post-toc-text">案例</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#索引优化"><span class="post-toc-text">索引优化</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#查询截取分析"><span class="post-toc-text">查询截取分析</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#查询优化"><span class="post-toc-text">查询优化</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Order-by优化"><span class="post-toc-text">Order by优化</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#Group-by优化"><span class="post-toc-text">Group by优化</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#主从复制"><span class="post-toc-text">主从复制</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#原理"><span class="post-toc-text">原理</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#锁机制"><span class="post-toc-text">锁机制</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#锁的分类"><span class="post-toc-text">锁的分类</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#表锁（偏读）"><span class="post-toc-text">表锁（偏读）</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#行锁（偏写）"><span class="post-toc-text">行锁（偏写）</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>
    

<nav id="article-nav">
  
    <a href="/2020/09/11/springmvc-model/" id="article-nav-newer" class="article-nav-link-wrap">

      <span class="article-nav-title">
        <i class="fa fa-hand-o-left" aria-hidden="true"></i>
        
          &#39;SpringMVC 工作原理&#39;
        
      </span>
    </a>
  
  
    <a href="/2020/09/08/mysql-performanceSchema/" id="article-nav-older" class="article-nav-link-wrap">
      <span class="article-nav-title">&#39;MYSQL performance schema详解&#39;</span>
      <i class="fa fa-hand-o-right" aria-hidden="true"></i>
    </a>
  
</nav>



    
        <div id="SOHUCS" sid="mysql-index" ></div>
<script type="text/javascript">
    (function(){
        var appid = 'cyuQBWutQ';
        var conf = '7882bf42fa9e8bed0d20d7c215c57a71';
        var width = window.innerWidth || document.documentElement.clientWidth;
        if (width < 960) {
            window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>'); } else { var loadJs=function(d,a){var c=document.getElementsByTagName("head")[0]||document.head||document.documentElement;var b=document.createElement("script");b.setAttribute("type","text/javascript");b.setAttribute("charset","UTF-8");b.setAttribute("src",d);if(typeof a==="function"){if(window.attachEvent){b.onreadystatechange=function(){var e=b.readyState;if(e==="loaded"||e==="complete"){b.onreadystatechange=null;a()}}}else{b.onload=a}}c.appendChild(b)};loadJs("https://changyan.sohu.com/upload/changyan.js",function(){window.changyan.api.config({appid:appid,conf:conf})}); } })(); </script>
    
</section>
        
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


      <p>
        Powered by  <a href="http://hexo.io/" target="_blank">Hexo</a>
        Theme <a href="//github.com/wongminho/hexo-theme-miho" target="_blank">MiHo</a>
      &copy; 2020 Kuro<br>
      </p>
    </div>
  </div>
</footer>
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<script src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script>
  var mihoConfig = {
      root: "https://midkuro.gitee.io",
      animate: true,
      isHome: false,
      share: true,
      reward: 1
  }
</script>
<div class="sidebar">
    <div id="sidebar-search" title="Search">
        <i class="fa fa-search"></i>
    </div>
    <div id="sidebar-category" title="Categories">
        <i class="fa fa-book"></i>
    </div>
    <div id="sidebar-tag" title="Tags">
        <i class="fa fa-tags"></i>
    </div>
    <div id="sidebar-top">
        <span class="sidebar-top-icon"><i class="fa fa-angle-up"></i></span>
    </div>
</div>
<div class="sidebar-menu-box" id="sidebar-menu-box">
    <div class="sidebar-menu-box-container">
        <div id="sidebar-menu-box-categories">
            <a class="category-link" href="/categories/ActiveMQ/">ActiveMQ</a><a class="category-link" href="/categories/Algorithm/">Algorithm</a><a class="category-link" href="/categories/Cache/">Cache</a><a class="category-link" href="/categories/Config/">Config</a><a class="category-link" href="/categories/Cryptography/">Cryptography</a><a class="category-link" href="/categories/Docker/">Docker</a><a class="category-link" href="/categories/Druid/">Druid</a><a class="category-link" href="/categories/Eureka/">Eureka</a><a class="category-link" href="/categories/Feign/">Feign</a><a class="category-link" href="/categories/Firewall/">Firewall</a><a class="category-link" href="/categories/HTTPS/">HTTPS</a><a class="category-link" href="/categories/HashMap/">HashMap</a><a class="category-link" href="/categories/Hystrix/">Hystrix</a><a class="category-link" href="/categories/JVM/">JVM</a><a class="category-link" href="/categories/Jenkins/">Jenkins</a><a class="category-link" href="/categories/Kubernetes/">Kubernetes</a><a class="category-link" href="/categories/LVS/">LVS</a><a class="category-link" href="/categories/MYSQL/">MYSQL</a><a class="category-link" href="/categories/Mybatis/">Mybatis</a><a class="category-link" href="/categories/NIO/">NIO</a><a class="category-link" href="/categories/Nacos/">Nacos</a><a class="category-link" href="/categories/Netty/">Netty</a><a class="category-link" href="/categories/Nginx/">Nginx</a><a class="category-link" href="/categories/Nginx/Redis/">Redis</a><a class="category-link" href="/categories/Nodejs/">Nodejs</a><a class="category-link" href="/categories/Redis/">Redis</a><a class="category-link" href="/categories/RocketMQ/">RocketMQ</a><a class="category-link" href="/categories/SSO/">SSO</a><a class="category-link" href="/categories/Seata/">Seata</a><a class="category-link" href="/categories/Security/">Security</a><a class="category-link" href="/categories/Sentinel/">Sentinel</a><a class="category-link" href="/categories/Spring/">Spring</a><a class="category-link" href="/categories/Spring/Mybatis/">Mybatis</a><a class="category-link" href="/categories/Spring/Mybatis/SpringMVC/">SpringMVC</a><a class="category-link" href="/categories/Starter/">Starter</a><a class="category-link" href="/categories/Stream/">Stream</a><a class="category-link" href="/categories/Synchronized/">Synchronized</a><a class="category-link" href="/categories/Systemctl/">Systemctl</a><a class="category-link" href="/categories/Thread/">Thread</a><a class="category-link" href="/categories/Zuul/">Zuul</a><a class="category-link" href="/categories/binary/">binary</a><a class="category-link" href="/categories/springMVC/">springMVC</a>
        </div>
        <div id="sidebar-menu-box-tags">
            <a href="/tags/ActiveMQ/" style="font-size: 17px;">ActiveMQ</a> <a href="/tags/Algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/tags/Cryptography/" style="font-size: 12px;">Cryptography</a> <a href="/tags/DevOps/" style="font-size: 19px;">DevOps</a> <a href="/tags/Docker/" style="font-size: 13px;">Docker</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/HashMap/" style="font-size: 11px;">HashMap</a> <a href="/tags/JVM/" style="font-size: 13px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Kubernetes/" style="font-size: 11px;">Kubernetes</a> <a href="/tags/LVS/" style="font-size: 10px;">LVS</a> <a href="/tags/Linux/" style="font-size: 14px;">Linux</a> <a href="/tags/MYSQL/" style="font-size: 12px;">MYSQL</a> <a href="/tags/Mybatis/" style="font-size: 12px;">Mybatis</a> <a href="/tags/NIO/" style="font-size: 13px;">NIO</a> <a href="/tags/Netty/" style="font-size: 11px;">Netty</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Redis/" style="font-size: 16px;">Redis</a> <a href="/tags/RocketMQ/" style="font-size: 12px;">RocketMQ</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/SpringBoot/" style="font-size: 14px;">SpringBoot</a> <a href="/tags/SpringCloud/" style="font-size: 18px;">SpringCloud</a> <a href="/tags/SpringMVC/" style="font-size: 10px;">SpringMVC</a> <a href="/tags/Thread/" style="font-size: 13px;">Thread</a>
        </div>
    </div>
    <a href="javascript:;" class="sidebar-menu-box-close">&times;</a>
</div>
<div class="mobile-header-menu-nav" id="mobile-header-menu-nav">
    <div class="mobile-header-menu-container">
        <span class="title">Menus</span>
        <ul class="mobile-header-menu-navbar">
            
            <li>
                <a  href="/">
                    <i class="fa fa-home"></i><span>Home</span>
                </a>
            </li>
            
            <li>
                <a  href="/archives">
                    <i class="fa fa-archive"></i><span>Archives</span>
                </a>
            </li>
            
            <li>
                <a  href="/about">
                    <i class="fa fa-user"></i><span>About</span>
                </a>
            </li>
            
        </ul>
    </div>
    <div class="mobile-header-tag-container">
        <span class="title">Tags</span>
        <div id="mobile-header-container-tags">
            <a href="/tags/ActiveMQ/" style="font-size: 17px;">ActiveMQ</a> <a href="/tags/Algorithm/" style="font-size: 10px;">Algorithm</a> <a href="/tags/Cryptography/" style="font-size: 12px;">Cryptography</a> <a href="/tags/DevOps/" style="font-size: 19px;">DevOps</a> <a href="/tags/Docker/" style="font-size: 13px;">Docker</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/HashMap/" style="font-size: 11px;">HashMap</a> <a href="/tags/JVM/" style="font-size: 13px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Kubernetes/" style="font-size: 11px;">Kubernetes</a> <a href="/tags/LVS/" style="font-size: 10px;">LVS</a> <a href="/tags/Linux/" style="font-size: 14px;">Linux</a> <a href="/tags/MYSQL/" style="font-size: 12px;">MYSQL</a> <a href="/tags/Mybatis/" style="font-size: 12px;">Mybatis</a> <a href="/tags/NIO/" style="font-size: 13px;">NIO</a> <a href="/tags/Netty/" style="font-size: 11px;">Netty</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Redis/" style="font-size: 16px;">Redis</a> <a href="/tags/RocketMQ/" style="font-size: 12px;">RocketMQ</a> <a href="/tags/Spring/" style="font-size: 15px;">Spring</a> <a href="/tags/SpringBoot/" style="font-size: 14px;">SpringBoot</a> <a href="/tags/SpringCloud/" style="font-size: 18px;">SpringCloud</a> <a href="/tags/SpringMVC/" style="font-size: 10px;">SpringMVC</a> <a href="/tags/Thread/" style="font-size: 13px;">Thread</a>
        </div>
    </div>
</div>
<div class="search-wrap">
    <span class="search-close">&times;</span>
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
            <i class="icon icon-lg icon-chevron-left"></i>
        </a>
        <input class="search-field" placeholder="Search..." id="keywords">
        <a id="search-submit" href="javascript:;">
            <i class="fa fa-search"></i>
        </a>
    <div class="search-container" id="search-container">
        <ul class="search-result" id="search-result">
        </ul>
    </div>
</div>

<div id="search-tpl">
    <li class="search-result-item">
        <a href="{url}" class="search-item-li">
            <span class="search-item-li-title" title="{title}">{title}</span>
        </a>
    </li>
</div>

<script src="/js/search.js"></script>


<script src="/js/main.js"></script>



  <script src="//cdn.bootcss.com/particles.js/2.0.0/particles.min.js"></script>
  <div id="particles"></div>
  
<script src="/js/particles.js"></script>








  
<link rel="stylesheet" href="//cdn.bootcss.com/animate.css/3.5.0/animate.min.css">

  <script src="//cdn.bootcss.com/scrollReveal.js/3.0.5/scrollreveal.js"></script>
  
<script src="/js/animate.js"></script>



  
<script src="/js/pop-img.js"></script>

  <script>
     $(".article-entry p img").popImg();
  </script>

  </div>
</body>
</html>